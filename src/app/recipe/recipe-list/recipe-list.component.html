<!--
  Vista: Lista de Recetas (/recipe)
  ---------------------------------
  Objetivo del Punto 3:
   - Mostrar cada receta como una CARD con imagen, nombre, etiquetas
     esenciales y un botón que redirige al detalle (cambia la URL).
   - Usamos Bootstrap (grid y clases de card) para maquetar rápidamente.
   - Las recetas provienen ahora del servicio (ver componente TS).
   - No se renderiza el detalle inline (el enunciado exige navegación por ruta).
-->

<div class="container py-4">
  <h3 class="text-center mb-4">Recetas uniandes</h3>

  <!-- Estado de carga / error (opcional para feedback al usuario) -->
  <div *ngIf="loading" class="text-center text-secondary mb-3">Cargando recetas...</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <div class="row g-3">
    <!-- Iteramos sobre recetas: cada una ocupa 12 cols en xs y 3 en md -->
    <div class="col-12 col-sm-6 col-md-3" *ngFor="let r of recipes">
      <div class="card h-100 shadow-sm">
        <!-- Imagen de la receta -->
        <img
          *ngIf="r.imagen"
          class="card-img-top"
          [src]="r.imagen"
          [alt]="r.nombre"
          style="object-fit: cover; height: 160px;"
        />
        <div class="card-body d-flex flex-column">
          <!-- Título -->
            <h6 class="card-title">{{ r.nombre }}</h6>
          <!-- Información resumida -->
          <ul class="small mb-2 ps-3">
            <li>Porciones: {{ r.porciones }}</li>
            <li>Tiempo: {{ r.tiempo_minutos }} min</li>
              <!-- Punto 4: cantidad de ingredientes -->
              <li>
                <span class="fw-bold text-secondary"># Ingredientes:</span>
                {{ getIngredientCount(r) }}
              </li>
          </ul>
          <!-- Botón que navega al detalle -->
          <button
            class="btn btn-primary btn-sm mt-auto"
            (click)="goToDetail(r.id)"
            type="button"
          >Ver receta</button>
        </div>
      </div>
    </div>
  </div>
</div>
